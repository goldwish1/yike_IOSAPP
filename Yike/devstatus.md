# 忆刻开发计划

## MVP版本功能 (v1.0.0)

### 1. 内容输入模块
- [x] OCR文本识别
  - 相机调用与图片获取
  - Vision框架集成
  - 识别结果处理
- [x] 手动文本输入
  - 输入界面设计
  - 字数限制(250字)
  - 分段预览功能
- [x] 自动提取标题
- [x] 内容预览编辑
- [x] 内容删除功能
  - 长按/右滑触发删除选项
  - 删除确认弹窗
  - 数据清理逻辑

### 2. 播放控制模块
- [x] 文本转语音
  - AVSpeechSynthesizer集成
  - 预设音色选择
  - 音色效果优化
- [x] 播放控制
  - 播放/暂停
  - 上一句/下一句
  - 速度调节(0.5x-2.0x)
  - 波形动画
- [x] 自动循环播放
- [x] 播放设置
  - 间隔设置(5秒-20秒)
  - 音色选择
  - 默认速度设置
- [x] 语音试听功能
  - 设置页面实时试听
  - 音色效果预览

### 3. 艾宾浩斯记忆系统
- [x] 记忆提醒
  - 基于艾宾浩斯遗忘曲线
  - 本地提醒通知
  - 提醒时间设置
- [x] 复习策略
  - 简单/标准/密集三种模式
  - 自定义提醒时间
  - 进度追踪与更新
- [x] 学习进度追踪

### 4. 统计与数据
- [x] 学习统计
  - 完成项目统计
  - 学习时长统计
  - 统计图表展示
- [x] 数据管理
  - 本地数据存储
  - 数据导入导出
  - 备份与恢复
- [x] 本地存储

### 5. 积分系统
- [x] 积分明细
  - 收支记录
  - 消费详情
  - 日期过滤
- [x] 积分充值
  - 套餐选择
  - 支付接口
  - 订单管理
- [x] 积分消费

### 6. 设置中心
- [x] 播放设置
  - 预设音色选择（标准/轻柔/浑厚）
  - 播放控制
  - 默认参数
  - 语音试听功能
- [x] 提醒设置
  - 每日提醒
  - 提醒方式
  - 复习策略
- [x] 关于页面
  - 版本信息
  - 开发者信息
  - 联系方式

## 迭代版本功能

### v1.1.0
- [ ] 用户系统
  - 账号注册/登录
  - 个人资料设置
  - 用户数据同步
- [ ] 云端备份
  - 自动备份
  - 手动备份
  - 恢复备份

### v1.2.0
- [ ] 学习统计增强
  - 更丰富的统计图表
  - 学习效率分析
  - 学习习惯建议
- [ ] 波形显示
  - 音频可视化
  - 实时波形展示
- [ ] 多语言支持
  - 英语支持
  - 日语支持
- [ ] 学习计划
  - 自定义学习目标
  - 智能计划生成
- [ ] 数据分析
  - 学习效果分析
  - 个性化建议

### v1.3.0
- [ ] 多端同步
  - iPad适配
  - Mac版本
- [ ] AI助手
  - 智能纠错
  - 学习建议
- [ ] 社区功能
  - 学习圈子
  - 内容分享

## 最新进展

### 2024-03-12
1. 调整了在线语音功能的积分消耗
   - 将在线语音积分消耗从1积分调整为5积分
   - 更新了PlayerView中的积分检查逻辑
   - 更新了PlaySettingsView中的试听功能积分消耗
   - 更新了PointsCenterView中的积分说明文本
   - 优化了积分不足时的提示信息

### 2024-03-11
1. 开始集成硅基流动API语音合成服务
   - 制定了API集成计划
   - 设计了音频缓存系统架构
   - 规划了播放系统适配方案
   - 准备扩展音色选择功能

### 2024-03-10
1. 优化了播放设置界面
   - 简化了音色选择，合并为单一选项
   - 提供三种预设音色（标准、轻柔、浑厚）
   - 优化了音色参数，提高辨识度
   - 改进了试听功能的用户体验

### 2024-03-09
1. 优化了播放设置功能
   - 添加了语音试听功能
   - 优化了音色差异，提高辨识度
   - 修复了试听后无法停止的问题
   - 增加了音色效果说明

### 2024-03-08
1. 实现了OCR拍照输入功能
   - 集成了相机和照片库访问功能
   - 实现了Vision框架的文字识别
   - 添加了积分消费逻辑
   - 优化了识别过程中的用户体验
   - 支持中文和英文的多语言识别

### 2024-03-07
1. 优化了内容输入流程
   - 新增自动提取标题功能
   - 优化了保存后的导航逻辑

2. 改进了播放功能
   - 实现了自动循环播放
   - 优化了播放控制逻辑

3. 增加了内容管理功能
   - 新增内容删除功能（长按/右滑触发）
   - 添加删除确认机制

4. 修复了设置页面问题
   - 实现了用户协议、隐私政策和联系我们的跳转功能

## 待办事项

### 当前版本计划
1. [x] OCR拍照输入功能
   - [x] 相机/相册访问集成
   - [x] Vision框架OCR实现
   - [x] 积分消费逻辑
   - [x] 识别结果编辑优化
   - [x] 多语言文本识别支持

2. [x] 播放设置优化
   - [x] 语音试听功能
   - [x] 音色选择简化
   - [x] 音色差异优化
   - [x] 试听控制修复

3. [x] 硅基流动API语音合成服务集成
   - [x] API客户端封装
     - API请求构建
     - 错误处理机制
     - 安全密钥管理
   - [x] 音频缓存系统
     - 本地缓存结构设计
     - 缓存查询与存储
     - 缓存过期策略
   - [x] 播放系统适配
     - 本地音频文件播放
     - 播放控制兼容
     - 播放状态管理
   - [x] 设置界面更新
     - 音色选项扩展
     - API音色试听功能
     - 音色分类管理

### 下一版本计划
1. [ ] 用户系统
   - [ ] 账号注册登录
   - [ ] 数据云同步

2. [ ] 社交功能
   - [ ] 内容分享
   - [ ] 学习小组

3. [ ] AI 助手
   - [ ] 智能分析
   - [ ] 学习建议 

NavigationLink(destination: PreviewEditView(
    text: selectedMethod == .manual ? manualText : recognizedText,
    shouldPopToRoot: $shouldPopToRoot
), isActive: $navigateToPreview) {
    EmptyView()
} 